<!DOCTYPE html>
<html>

<head>
    <style>
    body {
        overflow: hidden;
        margin: 0;
    }

    canvas {
        pointer-events: none;
    }
    
    .number {
        font-size: 50px;
        /*color: white;*/
    }

    iframe {
        overflow: hidden;
    }

    </style>
    <title>Three</title>
</head>

<body>
    <script src="assets/js/three.min.js"></script>
    <script src="assets/js/MouseControls.js"></script>
    <script src="assets/js/CanvasRenderer.js"></script>
        <script src="assets/js/Projector.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js"></script>
    <script src="https://dl.dropboxusercontent.com/u/3587259/Code/Threejs/CSS3DRenderer.js"></script>
    <script>
    var camera, sceneGl, rendererGl;
    var sceneCss, rendererCss;
    var controls;
    var moveToResume = false;

    init();
    animate();

    function init() {

        camera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 1, 10000);
        camera.position.z = 600;

        controls = new THREE.MouseControls(camera);

        sceneGl = new THREE.Scene();
        sceneCss = new THREE.Scene();


        // create the plane mesh
        var material = new THREE.MeshBasicMaterial({
            color: 0x000000,
            wireframe: true
        });
        material.color.set('black');
        material.opacity = 1;
        material.blending = THREE.NoBlending;
        // var geometry = new THREE.PlaneGeometry(800, 1000);
        // var planeMesh = new THREE.Mesh(geometry, material);
        // // add it to the WebGL scene
        // sceneGl.add(planeMesh);
        // planeMesh.position.setZ(1);

        // objects.push(planeMesh);

        // }

        var resume = document.createElement('iframe');
        resume.src = "resume.html"
            resume.style.width = "1000px";
            resume.style.height = "1000px";
            resume.style.overflow = "hidden";
            resume.id = 'resumeFrame';
        object = new THREE.CSS3DObject(resume);

        sceneCss.add(object);

        object.position.setZ(-300);

        // var floor = createFloor();
        // floor.position.setY(-500);

        // sceneGl.add(floor);

        rendererCss = new THREE.CSS3DRenderer();
        rendererCss.setSize(window.innerWidth, window.innerHeight);
        rendererCss.domElement.style.position = 'absolute';
        rendererCss.domElement.style.top = 0;

        rendererGl = new THREE.WebGLRenderer({
            alpha: true
        });
        rendererGl.setClearColor(0x000000, 0);

        rendererGl.setSize(window.innerWidth, window.innerHeight);

        rendererGl.domElement.style.position = 'absolute';
        rendererGl.domElement.style.zIndex = 1;
        rendererGl.domElement.style.top = 0;
        rendererCss.domElement.appendChild(rendererGl.domElement);

        document.body.appendChild(rendererCss.domElement);
        $('body').bind('test', function() {
            moveToResume = true;
            console.log("FFFFFF")
        })
        window.addEventListener('resize', function() {
            resizeWindow();
        });

}

    function animate() {

        if (moveToResume) {
                if (camera.position.z > 200) {
                    camera.position.z -= 5;
                }
                else {
                    moveToResume = false;
                }
        }
        requestAnimationFrame(animate);

        rendererGl.render(sceneGl, camera);
        rendererCss.render(sceneCss, camera);

    }

    function resizeWindow() {
        var WIDTH = window.innerWidth,
        HEIGHT = window.innerHeight;
        rendererGl.setSize(WIDTH, HEIGHT);
        rendererCss.setSize(WIDTH, HEIGHT);
        camera.aspect = WIDTH / HEIGHT;
        camera.updateProjectionMatrix();
    }

    function createFloor() {
        geometry = new THREE.PlaneGeometry(2000, 2000, 5, 5);
        geometry.applyMatrix(new THREE.Matrix4().makeRotationX(-Math.PI / 2));
        var material = new THREE.MeshBasicMaterial({
            color: 0x000000,
            wireframe: true
        });
        return new THREE.Mesh(geometry, material);
    }
    </script>
</body>

</html>
